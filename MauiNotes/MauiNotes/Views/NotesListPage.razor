@page "/NotesList/{Type}"
@inject INotesService _notesService
@inject INoteReader _noteReader

<h1>Notes List</h1>

<p>Type: @Type</p>
<ul>
    @foreach (var item in _notes)
    {
        <li>
            @item.NoteText
            &nbsp;<button @onclick="() => Read_Text(item.NoteText)">Click me</button>
        </li>
    }
</ul>

@code {
    [Parameter]
    public string Type { get; set; }

    private List<Note> _notes = new List<Note>();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        _notes = await _notesService.GetNotes(Enum.Parse<NoteType>(Type));
    }

    async void Read_Text(string noteText)
    { 
        await _noteReader.ReadNote(noteText); 
    }

}
